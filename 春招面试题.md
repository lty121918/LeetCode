# 前端安全

## XXS

xss: 跨站脚本攻击（Cross Site Scripting）是最常见和基本的攻击 WEB 网站方法，攻击者通过注入非法的 html 标签或者 javascript 代码，从而当用户浏览该网页时，控制用户浏览器。

### xss的分类

+ DOM XSS
+ 反射型XSS（非持久型）
+ 储存型XSS（持久型）

### 实现原理

**DOM XSS**：目前更流行前后端分离的项目，反射型 XSS 无用武之地。 但这种攻击不需要经过服务器，触发XSS靠的是浏览器端的DOM解析，我们知道，网页本身的 JavaScript也是可以改变 HTML 的，黑客正是利用这一点来实现插入恶意脚本。

**反射型**：恶意 JavaScript脚本属于用户发送给网站请求中的一部分，随后网站又将这部分返回给用户，恶意脚本在页面中被执行。一般发生在前后端一体的应用中，服务端逻辑会改变最终的网页代码。

**存储型**：又被称为持久型XSS，它是最危险的一种跨站脚本，相比反射型XSS和DOM型XSS具有更高的隐蔽性，所以危害更大，因为它不需要用户手动触发。 允许用户存储数据的web程序都可能存在存储型XSS漏洞，常见于搜索、微博、社区贴吧评论等。

### 危害

- 盗取用户 Cookie
- 未授权操作
- 修改 DOM
- 刷浮窗广告
- 发动 XSS 蠕虫攻击
- 劫持用户行为，进一步渗透内网
- ......

### 防御方式

+ 阻止恶意代码的注入和实行；
+ 用更安全的方法校验和保护用户的身份凭证，设置HttpOnly，使cookie字段无法通过JS获取；
+ 避免使用`innerHTML，document.write,eval`等方法；
+ 开启内容安全策略CSP防护，在HTTP头部设置`Content-Security-Policy: script-src 'self'`；

## CSRF

CSRF（Cross-site request forgery）中文名称跨站请求伪造，攻击者诱导受害者进入第三方网站，在第三方网站中，向被攻击网站发送跨站请求。利用受害者在被攻击网站已经获取的注册凭证，绕过后台的用户验证，达到冒充用户对被攻击的网站执行某项操作的目的。

### 实现方式

- 最容易实现的是 `Get` 请求，一般进入黑客网站后，可以通过设置 `img`的 `src` 属性来自动发起请求
- 在黑客的网站中，构造隐藏表单来自动发起 `Post` 请求
- 通过引诱链接诱惑用户点击触发请求，利用 `a` 标签的 `href`。

### CSRF攻击和XSS攻击有什么区别？

CSRF 攻击不需要将恶意代码注入用户的页面，仅仅是利用服务器的漏洞和用户的登录状态来实施攻击。

CSRF 攻击成本也比 XSS 低，用户每天都要访问大量网页，无法确认每一个网页的合法性， 从用户角度来说，无法彻底防止 CSRF 攻击。

### 防御方式

+ 同源检测
+ 增加二次验证（独立的支付密码）
+ CSRF Token
+ 设置Cookie的SameSite属性

## XS-Leaks



> 参考链接：[前端安全知识 - 掘金 (juejin.cn)](https://juejin.cn/post/6844903502968258574#heading-0)
>
> ​				[「前端食堂」想进大厂必须要知道的Web安全问题 - 掘金 (juejin.cn)](https://juejin.cn/post/6844904100945985543)
>
> ​				  [温故知新：前端安全知多少 - 掘金 (juejin.cn)](https://juejin.cn/post/6893320971462279175#heading-0)